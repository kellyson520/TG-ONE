[pytest]
asyncio_mode = auto
testpaths = tests
python_files = test_*.py
pythonpath = .
addopts = -v --tb=short
norecursedirs = tests/temp .agent .git __pycache__ .venv dist build

# 测试标记定义
markers =
    unit: 单元测试 (快速)
    integration: 集成测试 (中等速度)
    stress: 压力测试 (慢速)
    slow: 慢速测试 (通常在 CI 中跳过)
    
# 过滤警告
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning

# 日志配置
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# 覆盖率配置
[coverage:run]
source = .
omit = 
    tests/*
    .venv/*
    */site-packages/*
    
[coverage:report]
precision = 2
show_missing = true
skip_covered = false
