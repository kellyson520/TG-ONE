{% extends "base.html" %}
{% block title %}下载管理 - Forwarder Pro{% endblock %}
{% block content %}

<div class="row mb-4">
    <div class="col-12">
        <h4 class="fw-bold mb-0">媒体资源下载</h4>
        <p class="text-muted small">监控系统后台媒体资源的抓取与存储进度</p>
    </div>
</div>

<div class="row g-4 mb-4">
    <!-- 概览卡片 -->
    <div class="col-md-4">
        <div class="glass-card p-4">
            <div class="d-flex align-items-center justify-content-between mb-2">
                <div
                    class="avatar-sm bg-primary-gradient rounded-4 d-flex align-items-center justify-content-center text-white">
                    <i class="bi bi-cloud-arrow-down fs-5"></i>
                </div>
                <span class="badge-primary-soft extra-small">处理中</span>
            </div>
            <div class="text-muted extra-small fw-bold text-uppercase opacity-75">活跃任务</div>
            <div class="fs-3 fw-bold mt-1" id="activeTasks">0</div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="glass-card p-4">
            <div class="d-flex align-items-center justify-content-between mb-2">
                <div
                    class="avatar-sm bg-success-gradient rounded-4 d-flex align-items-center justify-content-center text-white">
                    <i class="bi bi-check-circle fs-5"></i>
                </div>
                <span class="badge-success-soft extra-small">今日</span>
            </div>
            <div class="text-muted extra-small fw-bold text-uppercase opacity-75">已成功下载</div>
            <div class="fs-3 fw-bold mt-1" id="completedToday">0</div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="glass-card p-4">
            <div class="d-flex align-items-center justify-content-between mb-2">
                <div
                    class="avatar-sm bg-info-gradient rounded-4 d-flex align-items-center justify-content-center text-white">
                    <i class="bi bi-hdd-network fs-5"></i>
                </div>
                <span class="text-muted extra-small">MB/s</span>
            </div>
            <div class="text-muted extra-small fw-bold text-uppercase opacity-75">实时带宽占用</div>
            <div class="fs-3 fw-bold mt-1" id="networkTraffic">0.00</div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="glass-card p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h6 class="fw-bold mb-0"><i class="bi bi-list-stars me-2"></i>任务队列</h6>
                <button class="btn btn-sm btn-outline-danger border-0 bg-white bg-opacity-10 px-3">
                    <i class="bi bi-trash me-2"></i>清理缓存
                </button>
            </div>

            <div class="table-responsive">
                <table class="table table-hover table-sm small align-middle">
                    <thead>
                        <tr class="text-muted opacity-75">
                            <th width="40%">资源名称</th>
                            <th>大小</th>
                            <th width="20%">完成进度</th>
                            <th>瞬时速度</th>
                            <th>状态</th>
                            <th class="text-end">管理</th>
                        </tr>
                    </thead>
                    <tbody id="downloadsTableBody" class="border-top-0">
                        <tr>
                            <td colspan="6" class="text-center py-5">
                                <i class="bi bi-cloud-slash fs-2 d-block mb-2 opacity-25"></i>
                                <span class="text-muted">当前暂无正在进行的任务</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', () => {
        // 后续可通过 WebSocket 订阅进度更新
    });
</script>
{% endblock %}